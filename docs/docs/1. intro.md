# Getting Started with AltMount

Welcome to **AltMount** - a high-performance WebDAV server backed by NZB/Usenet that provides seamless streaming and integration with media management tools.

## What is AltMount?

AltMount is a modern WebDAV server that bridges the gap between Usenet/NZB downloads and your media applications. It provides:

- **WebDAV Interface**: Mount NZB content as a standard filesystem via WebDAV
- **Streaming Capability**: Stream media files directly from Usenet without full downloads
- **Media Integration**: Native integration with Radarr, Sonarr, and other ARR applications
- **SABnzbd Compatibility**: Drop-in replacement for SABnzbd with existing workflows
- **Health Monitoring**: Built-in health checks and automatic repair capabilities
- **Web Interface**: Modern React-based web UI for configuration and monitoring

_[Screenshot placeholder: AltMount web interface dashboard showing overview of connected services, download statistics, and system status]_

## Architecture Overview

- **Metadata Storage**: Filesystem-based metadata for fast lookups
- **NNTP Providers**: Multiple Usenet provider support with failover
- **WebDAV Server**: Standards-compliant WebDAV implementation
- **REST API**: Full API for integration and automation
- **Web Interface**: Configuration and monitoring dashboard

## Key Features

### 🚀 High Performance

- Concurrent downloads with configurable worker pools
- Intelligent caching and metadata optimization
- Range request support for efficient streaming
- Multi-provider load balancing

### 🔗 Seamless Integration

- Native ARR application support with automatic repair functionality
- SABnzbd-compatible API endpoints for existing workflows
- Standard WebDAV protocol support for media clients
- RESTful API for custom integrations and monitoring

### 🛡️ Reliability & Security

- Health monitoring with auto-repair capabilities
- SSL/TLS support for secure connections
- Graceful error handling and recovery
- Comprehensive logging and debugging

### 🎛️ Easy Configuration

- YAML-based configuration with extensive options
- Web-based configuration interface
- Docker and CLI deployment options

## Getting Started

Follow these steps to set up AltMount with Docker and integrate it with your media management tools.

### 1. Run AltMount with Docker Compose

Create a `docker-compose.yml` file:

```yaml
services:
  altmount:
    extra_hosts:
      - "host.docker.internal:host-gateway"
    image: ghcr.io/javi11/altmount:latest
    container_name: altmount
    environment:
      - PUID=1000
      - PGID=1000
      - PORT=8080
      - COOKIE_DOMAIN=localhost # Must match the domain/IP where web interface is accessed
    volumes:
      - ./config:/config
      - /mnt:/mnt:rshared # Linux only - see Rclone Mount section for macOS/Windows
    ports:
      - "8080:8080"
    restart: unless-stopped
    devices:
      - /dev/fuse:/dev/fuse:rwm
    cap_add:
      - SYS_ADMIN
    security_opt:
      - apparmor:unconfined
```

**Important**: Set `COOKIE_DOMAIN` to match how you'll access the web interface:

- For `localhost` or `127.0.0.1`: Use `COOKIE_DOMAIN=localhost`
- For specific IP (e.g., `192.168.1.100`): Use `COOKIE_DOMAIN=192.168.1.100`
- For domain (e.g., `altmount.example.com`): Use `COOKIE_DOMAIN=altmount.example.com`

Start the service:

```bash
mkdir -p ./config/metadata
docker-compose up -d
```

### 2. Create a New User

1. Open your browser and navigate to `http://localhost:8080`
2. On first access, you'll be prompted to create an admin user
3. Enter your desired username and password
4. Complete the initial setup

![User registration screen](/img/register.png)

### 3. Configure Rclone Mount

AltMount includes a built-in rclone mount feature for the WebDAV interface:

> **⚠️ Important: macOS and Windows Users**
>
> The built-in rclone mount only works **inside the Linux container**. Due to Docker Desktop architecture limitations, FUSE mounts created inside containers cannot be directly accessed from macOS or Windows hosts.
>
> **Solution for macOS/Windows hosts:**
>
> Install rclone on your host system and mount the AltMount WebDAV endpoint:
>
> **macOS:**
>
> ```bash
> # Install rclone and macFUSE
> brew install rclone macfuse
>
> # Create cache directory
> mkdir -p ~/.cache/rclone
>
> # Step 1: Create rclone WebDAV config (adjust credentials)
> rclone config create altmount webdav \
>   url http://localhost:8080 \
>   vendor other \
>   user your-username \
>   pass $(rclone obscure "your-password")
>
> # Step 2: Mount AltMount with VFS cache
> rclone mount altmount: /Users/your-username/mnt/altmount \
>   --vfs-cache-mode full \
>   --vfs-cache-max-size 50G \
>   --vfs-cache-max-age 504h \
>   --vfs-read-chunk-size 32M \
>   --vfs-read-ahead 128M \
>   --dir-cache-time 10m \
>   --cache-dir ~/.cache/rclone \
>   --allow-other \
>   --daemon
> ```
>
> **Windows:**
>
> ```powershell
> # Install rclone and WinFsp from https://rclone.org and https://winfsp.dev
>
> # Create cache directory
> New-Item -ItemType Directory -Force -Path "$env:LOCALAPPDATA\rclone\cache"
>
> # Step 1: Create rclone WebDAV config (adjust credentials)
> # First, obscure your password:
> $obscuredPass = rclone obscure "your-password"
>
> # Then create the config:
> rclone config create altmount webdav `
>   url http://localhost:8080 `
>   vendor other `
>   user your-username `
>   pass $obscuredPass
>
> # Step 2: Mount AltMount with VFS cache
> rclone mount altmount: X: ^
>   --vfs-cache-mode full ^
>   --vfs-cache-max-size 50G ^
>   --vfs-cache-max-age 504h ^
>   --vfs-read-chunk-size 32M ^
>   --vfs-read-ahead 128M ^
>   --dir-cache-time 10m ^
>   --cache-dir %LOCALAPPDATA%\rclone\cache
> ```
>
> For more details, see the [rclone installation guide](https://rclone.org/install/).

**For Linux hosts** (or container-internal use only):

1. Go to **Configuration** → **Rclone** (`/config/rclone`)
2. **Enable rclone mount** by toggling the switch
3. Configure the **mount path** (e.g., `/mnt/altmount`)
4. Adjust cache settings as needed (defaults are usually fine)
5. **Save** the configuration
6. Click **Start Mount** to activate the rclone mount

The mount will now be available at the configured path inside the container.

![Rclone mount configuration interface](/img/rclone_mount_config.png)

### 4. Add a Usenet Provider

1. Navigate to **Configuration** → **Providers** (`/config/providers`)
2. Click **Add Provider**
3. Enter your Usenet provider details:
   - **Name**: Descriptive name for your provider
   - **Host**: NNTP server address
   - **Port**: Usually 563 (SSL) or 119 (non-SSL)
   - **Username**: Your provider username
   - **Password**: Your provider password
   - **Max Connections**: Number of simultaneous connections (e.g., 20)
   - **Enable SSL/TLS**: Recommended for security
4. **Save** the provider configuration

![Add Usenet provider configuration](/img/add_provider.png)

### 5. Enable SABnzbd API

1. Go to **Configuration** → **SABnzbd** (`/config/sabnzbd`)
2. **Enable SABnzbd API compatibility**
3. Set **Complete directory** to `/complete` (or `/` for mount root)
4. Add categories for your media:
   - Click **Add Category**
   - Name: `tv`, Directory: `tv`, Priority: Normal
   - Click **Add Category** again
   - Name: `movies`, Directory: `movies`, Priority: Normal
5. **Save** the configuration

![SABnzbd API configuration with categories](/img/sabnzbd_config.png)

### 6. Enable ARR Integration

1. Navigate to **Configuration** → **ARR Integration** (`/config/arrs`)
2. **Enable ARR integration**
3. Click **Add Instance** to add your Sonarr/Radarr instances:
   - **Type**: Select Sonarr or Radarr
   - **Name**: Descriptive name (e.g., "Main Sonarr")
   - **URL**: Full URL to your ARR instance (e.g., `http://localhost:8989`)
   - **API Key**: Your ARR application's API key
   - **Enable**: Toggle on
4. Repeat for each ARR instance you want to integrate
5. **Save** the configuration

![ARR integration configuration](/img/arr_config.png)

### 7. Enable Auto-Repair

1. Go to **Configuration** → **Health** (`/config/health`)
2. **Enable health monitoring**
3. **Enable auto-repair** to automatically fix corrupted downloads
4. Configure settings:
   - **Check Interval**: How often to run health checks (default: 30 minutes)
   - **Max Concurrent Jobs**: Number of simultaneous repair jobs (default: 1)
   - **Max Retries**: Retry attempts for failed repairs (default: 2)
5. **Save** the configuration

![Health monitoring and auto-repair configuration](/img/health_config.png)

### 8. Add AltMount as SABnzbd Client in ARRs

Configure your ARR applications to use AltMount as their download client:

1. Open your Sonarr/Radarr web interface
2. Go to **Settings** → **Download Clients**
3. Click the **+** button and select **SABnzbd**
4. Configure the client:
   - **Name**: `AltMount`
   - **Host**: `altmount` (or your AltMount server IP/hostname)
   - **Port**: `8080`
   - **API Key**: Copy from AltMount web interface (**System** page)
   - **Category**: Set to `tv` (for Sonarr) or `movies` (for Radarr)
5. **Test** the connection to verify it works
6. **Save** the download client

![SABnzbd download client configuration in Sonarr/Radarr](/img/sonarr_sabnzbd.png)

**Important**: In your ARR application settings:

- Go to **Settings** → **Media Management**
- Enable **Use Hardlinks instead of Copy** to prevent unnecessary file duplication
- This allows efficient file management between the mount and your media library

That's it! Your media applications can now seamlessly download and stream content through AltMount with automatic health monitoring and repair capabilities.

## Next Steps

1. **[Install AltMount](Installation/cli)** using your preferred method
2. **[Configure providers](Configuration/providers)** to connect your Usenet accounts
3. **[Set up integrations](Configuration/integration)** with Radarr, Sonarr, and other tools
4. **[Configure WebDAV clients](API/endpoints)** to access your content via API
5. **[Explore the API](API/endpoints)** for custom integrations

## Support & Community

- **Documentation**: You're reading it! Use the sidebar to navigate
- **GitHub Issues**: [Report bugs and request features](https://github.com/javi11/altmount/issues)
- **GitHub Discussions**: [Community support and questions](https://github.com/javi11/altmount/discussions)
- **Docker Hub**: [Official Docker images](https://hub.docker.com/r/javi11/altmount)

---

Ready to get started? Choose your preferred installation method and let's get AltMount running!
